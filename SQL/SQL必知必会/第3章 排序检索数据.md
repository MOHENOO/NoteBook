# 排序检索数据

## 排序数据

```sql
SELECT prod_name
FROM Products;
```

检索出的数据并不是随机显示的.如果不排序,数据一般将以它在底层表中出现的顺序显示,这有可能是数据最初添加对表中的顺序.但是,如果数据随后进行过更新或删除,那么这个顺序将会受到DBMS重用回收存储空间的方式的影响.因此如果不明确控制的话,则最终的结果不能(也不应该)依赖该排序顺序.关系数据库设计理论认为,如果不明确规定排序顺序,则不应该假定检索出的数据的顺序有任何意义.

子句(clause):SQL语句由子句构成,有些子句是必须的,有些则是可选的.一个子句通常由一个关键字加上所提供的数据组成.

为了明确地排序用SELECT语句检索出的数据,可使用ORDER BY子句.ORDER BY子句取一个或多个列的名字,据此对输出进行排序.

```sql
SELECT prod_name
FROM Products
ORDER BY prod_name;
```

**ORDER BY子句的位置**:在指定一条ORDER BY子句时,应该保证它是SELECT语句中最后一条子句,如果它不是最后的子句,将会出现错误信息.

**通过非选择列进行排序**:通常,ORDER BY子句使用的列将是为显示而选择的列.但是,实际上并不一定要这样,用非检索的列排序数据是完全合法的.

## 按多个列排序

经常需要按不止一个列进行排序.要按多个列排序,简单指定列名,列名之间用逗号分开即可.

```sql
SELECT prod_id,prod_price,prod_name
FROM Products
ORDER BY prod_price,prod_name;
```

重要的是理解在按多个列排序时,排序的顺序完全按规定进行.对于上述例子中的输出,仅在多个行具有相同的prod_price值时才按prod_name进行排序.如果prod_price列中所有的值都是唯一的,则不会按prod_name排序.

## 按列位置排序

除了能用列名指出排序顺序外,ORDER BY还支持按相对列位置进行排序.

```sql
SELECT prod_id,prod_price,prod_name
FROM Products
ORDER BY 2,3;
```

SELECT清单中指定的是选择列的相对位置而不是列名.这一方法的好处在于不用重新输入列名,但不明确给出列名有可能造成错用列名排序.其次在对SELECT语句进行更改时容易错误地对数据进行排序(忘记更改列的相对位置).显然不推荐使用这种方式.当列不在选择列名中,也不能使用这一方法.

## 指定排序方向

数据排序不限于升序排序,这只是默认的排序顺序.为了进行降序排序,必须指定DESC关键字.

```sql
SELECT prod_id,prod_price,prod_name
FROM Products
ORDER BY prod_price
DESC;
```

如果应用于多个列,DESC关键字只应用到直接位于其前面的列名.如果在多个列上降序排序,必须对每一个列指定DESC关键字.(ASC是升序,但没多大用处,因为默认为升序.)

**区分大小写和排序顺序**:在对文本性数据进行排序时,大小写排序取决于数据库管理系统的设置,在字典排序中,A与a相同这是大多数数据库管理系统的默认行为.但是许多DBMS允许数据库管理员在需要时改变这种行为.简单的ORDER BY可能做不到.
