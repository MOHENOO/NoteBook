# 创建计算字段

## 计算字段

存储在数据库表中的数据可能不是应用程序所需要的格式.我们可以直接从数据库中检索转换,计算或格式化过的数据,而不是检索出数据,然后再在客户端应用程序中重新格式化.这时就需要使用计算字段.

计算字段并不实际存在于数据库表中.计算字段是运行时在SELECT语句内创建的.需要注意的是,只有数据库知道SELECT语句中哪些列是实际表列,哪些列是计算字段从客户端来看,计算字段的数据与其他列的数据的返回格式相同.

**客户端与服务器的格式**:在SQL语句内可完成的许多转换和格式化工作都可以直接在客户端应用程序内完成.但一般来说,在数据库服务器上完成这些操作比在客户端中完成要快得多.

## 拼接字段

在SQL中可使用一个特殊的操作符来拼接两个列.根据你使用的DBMS,此操作符可用加号(+)或两个竖杠(||)表示.在MySQL和MariaDB中,必须使用特殊的函数(Concat()).多数DBMS使用(+)号.

**TRIM函数**:SQL的TRIM()函数可以去除空格.大多数DBMS都支持TRIM()函数,RTRIM()和LTRIM().

### 使用别名

一个未命名的列不能用于客户端应用中,因为客户端无法引用它.为了解决这个问题,SQL支持列别名.别名(alias)是一个字段或值的替换名.别名用AS关键字赋予.

```sql
SELECT TRIM(vend_name)+' ('+TRIM(vend_country) +')' AS vend_title
FROM Vendors
ORDER BY vend_name;
```

AS指示SQL创建一个包含指定计算结果的名为vend_title的计算字段.在很多DBMS中,AS关键字是可选的,不过最好使用它,这被视为一条最佳实践.

**别的名字**:别名既可以是一个单词也可以是一个字符串.如果是后者,字符串应该括在引号中.虽然这种做法是合法的,但不建议这么去做.多单词的名字可读性高,不过会给客户端应用带来各种问题.

## 执行算术计算

计算字段的另一个常见用途是对检索出的数据进行算术计算.

圆括号可用来区分优先顺序.

| 操作符 | 说明  |
| :----: | :---: |
|   +    |  加   |
|   -    |  减   |
|   *    |  乘   |
|   /    |  除   |

**如何测试计算**:SELECT语句为测试,检验函数和计算提供了很好的方法.虽然SELECT通常用于从表中检索数据,但是省略了FROM子句后就是简单地访问和处理表达式.可以根据需要使用进行检验.