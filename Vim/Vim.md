# Vim 技巧

## Vim解决问题的方式

### 技巧1 .命令

> .命令可以重复上次的修改。

### 技巧2 不要自我重复

使用复合命令，减少无关的移动，避免长命令。
| 复合命令 | 等效的长命令 |
| :------: | :----------: ||
|    C     |      c$      |
|    s     |      cl      |
|    S     |      ^C      |
|    I     |      ^i      |
|    A     |      $a      |
|    o     |      A       |
|    O     |      ko      |

### 技巧3 以退为进

>以退为进，从而使命令可重复。

### 技巧4 执行，重复，回退

>在面对重复性工作时，我们需要让移动动作和修改都能够重复。

|           目的           |         操作          | 重复  | 回退  |
| :----------------------: | :-------------------: | :---: | :---: |
|       做出一个修改       |        {edit}         |   .   |   u   |
| 在行内查找下一指定字符  |    f{char}/t{char}    |   ;   |   ,   |
|  在行内查找上一指定字符  |    F{char}/T{char}    |   ;   |   ,   |
| 在文档中查找下一处匹配项 |       /pattern        |   n   |   N   |
| 在文档中查找上一处匹配项 |       ?pattern        |   n   |   N   |
|         执行替换         | :s/target/replacement |   &   |   u   |
|      执行一系列修改      |     qx{changes}q      |  @x   |   u   |

### 技巧5 查找并手动替换

>/{word} 查找

### 技巧6 认识.范式

>用一键移动，另一键执行。

## 普通模式

### 技巧7 停顿时移开画笔

>思考时返回普通模式

### 技巧8 把撤销单元切成块

>在Vim中，我们可以控制撤销的粒度。从进入插入模式开始，直到返回普通模式为止，在此期间输入或删除的任何内容都被当作一次修改。因此，只要控制好对<ESC>键的使用，就可以使撤销命令作用于单词，句子或段落。
如果在插入模式中使用了<Up>,<Down>,<Left>,<Right>这些光标键，将会产生一个新的撤销块。这会对.命令产生影响。

技巧9 构造可重复的修改

>在Vim中，要完成一件事，总有不止一种方式。尽量选择可以一次撤销对方式

### 技巧10 用次数做简单的算术运算

>大多数普通模式命令可以在执行时指定次数，可以利用这个功能来做简单的算术运算

<C-a>和<C-x>命令分别对数字执行加和减操作。如果带一个次数前缀，就可以用它们加减任意整数。

>如果光标不在数字上，命令会作用于当前光标之后的数值。即进行一次正向搜索。

### 技巧11 能够重复，就别用次数

>使用重复，修改的粒度更小，更为可控。对一些简单的操作，可以使用次数。

### 技巧12 双剑合璧

>Vim的强大很大程度上源自操作符于动作命令相结合。

操作符+动作命令=操作

d{motion}命令可以对一个字符(dl),一个完整单词(daw)或一整个段落(dap)进行操作，它作用的范围由动作命令决定。

g~大小写切换,gu全小写,gU全大写。

>Vim的语法只有一条额外规则，即当一个操作符命令被连续调用两次时，它会作用于当前行。

| 命令  |     用途     |
| :---: | :----------: |
|   c   |     修改     |
|   d   |     删除     |
|   y   | 复制到寄存器 |
|  g~   |  反转大小写  |
|  gu   |  转换为小写  |
|  gU   |  转换为大写  |
|  ">"  |   增加缩进   |
|   <   |   减小缩进   |
|   =   |   自动缩进   |

## 插入模式

### 技巧13 在插入模式中可即时更正错误

| 按键操作 |            用途            |
| :------: | :------------------------: |
|   C-h    | 删除前一个字符（同退格键） |
|   C-w    |       删除前一个单词       |
|   C-u    |         删至行首          |

### 技巧14 返回普通模式

| 按键操作 |        用途         |
| :------: | :-----------------: |
|   Esc    |    切换普通模式     |
|   C-[    |    切换普通模式     |
|   C-o    | 切换到插入-普通模式 |

### 技巧15 不离开插入模式，粘贴寄存器中的文本

>yt,命令把文本复制到专用寄存器中。然后在插入模式中，按<C-r>0把刚才复制的文本粘贴到光标所在位置。
<C-r>{register},其中{register}是想要插入的寄存器的名字。但如果寄存器中包含大量文本，可能会导致屏幕延时。这是因为Vim在插入寄存器内的文本时，其插入方式就如同一个一个输入。因此如果有"textwidth"或者"autoindent"选项的话,就会导致不必要的换行或缩进。<C-r><C-p>{register}命令会智能一些，它会按原义插入文本。如果粘贴很多行文本的话，还是切换到普通模式。